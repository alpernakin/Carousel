<html lang="en">

<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <script type="text/javascript" src="./dist/bundle.js"></script>
</head>

<body>
    <div style="width: 1000px;">
        <div id="my-carousel"></div>
    </div>
</body>

<script type="text/javascript">
    window.onload = function () {
        function fakeRESTApiRequest(chunkSize, maxDelayMs) {
            let items = [];
            // fake delay in milliseconds 
            const delayMs = Math.round(Math.random() * maxDelayMs);
            // by 50 percent chance, it returns with full chunk size
            let randomChunkSize = Math.random() > 0.5 ? Math.random() * chunkSize : chunkSize;
            for (let i = 0; i < randomChunkSize; i++) {
                // id range from 1000 - 1025
                let imageId = Math.round(Math.random() * 25 + 1000);
                let title = getRandomElement(titleOptions);
                let type = getRandomElement(typeOptions);
                let cardinality = getRandomElement(cardinalityOptions);
                let language = getRandomElement(languageOptions);
                // seconds range 60 - 3600 * 5
                let duration = Math.round(Math.random() * (60 * 60 * 5 - 60) + 60);

                items.push({
                    image: `https://picsum.photos/id/${imageId}/800/400`,
                    title: title,
                    type: type,
                    cardinality: cardinality,
                    language: language,
                    duration: duration
                });
            }

            return new Promise((resolve, reject) =>
                setTimeout(() => resolve(items), delayMs));
        }

        let getRandomElement = (array) =>
            array ? array[Math.round(Math.random() * (array.length - 1))] : null;

        var titleOptions = [
            "Welcome to Effective Time Management",
            "Choosing The Best Audio Player Software For Your Computer",
            "The Small Change That Creates Massive Results In Your Life",
            "Advance Your Brand Potential With Giant Advertising Blimps",
            "How To Write Better Advertising Copy"
        ];

        var typeOptions = ["VIDEO", "ELEARNING", "ELEARNING PLAN", "PLAYLIST"];

        var cardinalityOptions = ["collection", "single"];

        var languageOptions = ["English", "German", "Italian", "Turkish"];

        var carousel = new carouselLib.Carousel({
            container: "my-carousel",
            title: "Fresh and just uploaded content",
            subtitle: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
            fetchCards: (chunkSize) => fakeRESTApiRequest(chunkSize, 2000)
        });
    };
</script>

</html>